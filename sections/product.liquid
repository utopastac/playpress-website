{{ 'product.js' | asset_url | script_tag }}
{{ 'product.css' | asset_url | stylesheet_tag }}
{{ 'gallery.css' | asset_url | stylesheet_tag }}

<div is="product">
  <div>
    <section>
      <div is="gallery">
        <div>
          <img
            class="image"
            data-index="0"
            srcset="
              {{ product.featured_image | img_url: '320x' }} 320w,
              {{ product.featured_image | img_url: '500x' }} 500w,
              {{ product.featured_image | img_url: '740x' }} 740w,
              {{ product.featured_image | img_url: '1000x' }} 1000w"
            src="{{ product.featured_image | img_url: '500x' }}"
            sizes="calc(100vw - 2rem)"
            width="1000"
            loading="lazy"
            height="750"
            alt="{{ product.featured_image.alt | escape }}"
          />
          {% for media in product.media offset:1 %}
            {{ index}}
            <img
              class="image"
              data-index="{{ forloop.index | plus: 1 }}"
              src="{{ media | img_url: '800x' }}"
              alt="{{ media.alt | escape  }}"
              loading="lazy"
              width="800"
              height="600"
            />
          {% endfor %}
        </div>
      </div><!--End gallery> -->

      <div is="product-content">
        <header>
          <h1>{{ product.title }}</h1>
          <p>{{ product.price | money }}</p>
        </header>

        {% form 'product', product %}
          <select name="id" hidden>
            {%- for variant in product.variants -%}
              <option selected="selected" value="{{ variant.id }}"></option>
            {%- endfor -%}
          </select>
          {%- if product.available -%}
            <input min="1" type="number" id="quantity" name="quantity" value="1"/>
            <button type="submit">
              Add to Cart
            </button>
          {%- else -%}
            <p>Sold Out</p>
          {%- endif -%}
        {% endform %}

        {% render 'delivery', expanded: true %}

        <div class="description">{{ product.description }}</div>

        {% render 'universal-features' %}

        {% comment %} {% render 'sharing' %} {% endcomment %}
      </div><!--End product content> -->
    </section>

    <div id="gallery-lightbox">
      <div class="container">
        {% for media in product.media %}
          <img
            class="image"
            data-index="{{ forloop.index }}"
            src="{{ media | img_url: '800x' }}"
            alt="{{ media.alt | escape  }}"
            loading="lazy"
            width="800"
            height="600"
          >
        {% endfor %}
      </div>
      <div class="icon close"></div>
    </div><!--End lightbox -->

  </div>
</div>
